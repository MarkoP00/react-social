import{u as w,r as l,j as e,G as j,a as S,l as I,F as x,L as y,v as N,f as F}from"./index-ChjP57xw.js";import{G as P,F as E}from"./Footer-Dli4zLto.js";function V(){const p=w(),[n,f]=l.useState(!1),[v,c]=l.useState(),b=()=>{f(!n)},[r,d]=l.useState({title:"",message:""}),[s,m]=l.useState({email:{value:"",invalid:!1,message:""},password:{value:"",invalid:!1,message:""}});l.useEffect(()=>{localStorage.removeItem("token"),localStorage.removeItem("loggedUserID"),localStorage.removeItem("loggedUserEmail"),localStorage.removeItem("loggedUserProfilePicture"),localStorage.removeItem("loggedUsername")},[]);const g=a=>{m(t=>({...t,[a]:{...t[a],invalid:!1,message:""}}))},u=(a,t)=>{m(i=>({...i,[t]:{...i[t],value:a}}))},h=async()=>{const{formIsInvalid:a,updatedFormData:t}=N(s);if(m(t),a)return;c(!0);const i={email:s.email.value,password:s.password.value};try{const o=await F.post("/social_media/users/login",i);o&&(localStorage.setItem("token",o.data.token),localStorage.setItem("loggedUserID",o.data.user.id),localStorage.setItem("loggedUserEmail",s.email.value),localStorage.setItem("loggedUserProfilePicture",o.data.user.profile_picture),localStorage.setItem("loggedUsername",o.data.user.username),p("/mainPage"))}catch{d({title:"Something went wrong...",message:"Please try again later!"})}finally{c(!1)}};return e.jsxs(e.Fragment,{children:[r.title&&e.jsx(j,{title:r.title,message:r.message,defaultPopup:!0,onClose:()=>d({title:"",message:""})}),v&&e.jsx(S,{}),e.jsxs("section",{className:"flex flex-col min-h-screen justify-center items-center bg-gray-50 gap-10 max-msm:gap-6",children:[e.jsx("div",{className:"sectionTop text-center mb-6",children:e.jsxs("div",{className:"flex justify-center items-center ",children:[e.jsx("img",{src:I,alt:"Logo",className:"w-40 h-40 mx-auto max-msm:h-24 max-msm:w-24"}),e.jsx("h1",{className:"text-5xl font-bold text-indigo-600 pointer-events-none ml-4 max-msm:text-2xl",children:"VibeChimp"})]})}),e.jsxs("form",{className:"main-content bg-white py-8 px-10 rounded-lg shadow-main-shadow w-96 max-msm:py-4 max-msm:w-[350px] mb-10",children:[e.jsx("div",{className:"content-header mb-4 text-center",children:e.jsx("h3",{className:"text-3xl font-bold text-indigo-600 pointer-events-none max-msm:text-2xl",children:"Login"})}),e.jsx(x,{labelText:"Email",inputType:"email",inputFor:"email",inputValue:s.email.value,invalid:s.email.invalid,invalidMessage:s.email.message,onReset:()=>g("email"),onEvent:a=>u(a,"email")}),e.jsx(x,{labelText:"Password",inputType:"password",inputFor:"password",inputValue:s.password.value,isPasswordVisible:n,invalid:s.password.invalid,invalidMessage:s.password.message,togglePasswordVisibility:b,onReset:()=>g("password"),onEvent:a=>u(a,"password")}),e.jsx("div",{className:"form-button mb-6",children:e.jsx(P,{buttonText:"Submit",onEvent:h})}),e.jsxs("div",{className:"form-bottom flex justify-between items-center",children:[e.jsx("p",{className:"text-gray-700",children:"Not a Member?"}),e.jsx(y,{to:"/create",className:"text-textColors-100 font-[600]",children:"Create account"})]})]}),e.jsx(E,{})]})]})}export{V as default};
